# C++进阶(00-5) 构造函数与析构函数（虚与多态）

## 00-5.1  是否为虚函数

构造函数是否可以成为虚函数？

析构函数是否可以成为虚函数？

结论：

1. 构造函数不可能成为虚函数。在构造函数执行结束后，虚函数表指针才能被初始化。
2. 析构函数可以成为虚函数。建议在设计类时，将析构函数声明为虚函数。

 

虚函数表指针的初始化必须在构造函数中进行，而构造函数是对象入口点。



析构函数作为虚函数有什么意义？

如果没有将析构函数声明为virtual ，编译器直接调用声明的父类的析构函数，不调用子类的析构函数。

如果将析构函数声明为virtual ，编译器会根据指针p指向的实际对象调用析构函数，所以先调用父类的析构函数，再调用子类的析构函数（多态）



## 00-5.2 是否可以发生多态

构造函数中是否可以发生多态？

析构函数中是否可以发生多态？

结论：

1. 构造函数中不可能发生多态，虚函数表指针并没有被初始化

2. 析构函数中不可能发生多态，虚函数表指针已经被销毁。

   当在构造函数和析构函数中不能发生多态行为，所以只会调用类中定义的版本。