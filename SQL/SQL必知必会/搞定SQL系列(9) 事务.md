# 搞定SQL系列(9) 事务

## 9.1 事务特性：ACID

事务的特性：要么完全执行，要么不执行。

1. 原子性（Atomicity， A）：数据处理操作的基本单位
2. 一致性（Consistency，c）：数据库进行事务操作后，由一种一致状态变成另一种一致状态。
3. 隔离性（Isolation，I）：每个事务彼此独立
4. 持久性（Durability，D）：事务提交后对事务的修改是持久性的。

一致性：由具体的业务定义，任何写入数据库的数据都需要满足事先定义的约束规则。

持久性：通过事务日志保证，包括回滚日志和重做日志。

## 9.2 事务控制指令

- `START TRANSACTION` / `BEGIN` ：显式开启一个事务
- `COMMIT` ：提交事务，一旦提交，对数据库的修改是永久性的
- `ROLLBACK`  / `ROLLBACK TO [SAVEPOINT]` ：回滚事务。撤销正在进行的所有没有提交的修改，或者将事务回滚到某个保存点
- `SAVEPOINT` ：在事务中创建保存点，方便后续针对保存点进行回滚。
- `RELEASE SAVEPOINT` ：删除某个保存点
- `SET TRANSACTION` ：设置事务的隔离级别