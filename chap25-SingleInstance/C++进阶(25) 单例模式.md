# C++进阶(25) 单例模式

## 25.1 单例模式

在架构设计中，某些类在整个系统中生命周期最长，且 **只能有一个对象存在** 。所以，如何定义一个类，使得该类最多只能创建一个对象？

- 如果要控制对象的数目，必须对外隐藏构造函数。

实现：

- 将构造函数访问属性设为：`private` 
- 定义instance 并初始化为 `NULL` ，用来标记对象是否被创建
- 使用对象时，访问 `instance` 属性
  - 空值：创建对象，并用 `instance` 标记
  - 非空值：返回 `instance` 标记的对象

> 实验25-1 单例模式version1 实现

## 25.2 

单例模式version1 存在问题：在使用单例模式时，必须定义静态变量，必须定义静态成员函数。

解决方案：

​        将单例模式的代码抽取出来，开发单例类模板，当使用单例类时，直接使用单例类模板。

> 实验 25-2 单例类模板，抽取单例模式，做类模板，当某个类要作为单例类时，将单例模板作为友元类即可。

























